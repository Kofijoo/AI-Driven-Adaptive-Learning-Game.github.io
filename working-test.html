<!DOCTYPE html>
<html>
<head>
    <title>Working Puffy Test</title>
    <style>
        body { margin: 0; background: #222; color: white; font-family: Arial; }
        canvas { width: 100%; height: 100vh; display: block; }
        #info { position: absolute; top: 10px; left: 10px; z-index: 100; }
        #dialogue { position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%); 
                   background: rgba(255,255,255,0.9); color: black; padding: 15px; border-radius: 10px; display: none; }
    </style>
</head>
<body>
    <div id="info">Loading...</div>
    <div id="dialogue"></div>
    <canvas id="canvas"></canvas>
    
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script>
        const info = document.getElementById('info');
        info.innerHTML = 'Babylon.js loaded, creating scene...';
        
        const canvas = document.getElementById('canvas');
        const engine = new BABYLON.Engine(canvas, true);
        const scene = new BABYLON.Scene(engine);
        
        // Manual camera setup instead of createDefaultCameraOrLights
        const camera = new BABYLON.ArcRotateCamera('camera', 0, Math.PI/3, 10, BABYLON.Vector3.Zero(), scene);
        camera.attachControls(canvas, true);
        
        // Manual light setup
        const light = new BABYLON.HemisphericLight('light', new BABYLON.Vector3(0, 1, 0), scene);
        light.intensity = 0.7;
        
        // Ground
        const ground = BABYLON.MeshBuilder.CreateGround('ground', {size: 10}, scene);
        const groundMat = new BABYLON.StandardMaterial('groundMat', scene);
        groundMat.diffuseColor = new BABYLON.Color3(0.3, 0.6, 0.3);
        ground.material = groundMat;
        
        // Puffy sphere
        const puffy = BABYLON.MeshBuilder.CreateSphere('puffy', {diameter: 2}, scene);
        puffy.position = new BABYLON.Vector3(0, 2, 0);
        
        const puffyMat = new BABYLON.StandardMaterial('puffyMat', scene);
        puffyMat.diffuseColor = new BABYLON.Color3(0.7, 0.9, 1.0);
        puffyMat.emissiveColor = new BABYLON.Color3(0.1, 0.2, 0.3);
        puffy.material = puffyMat;
        
        info.innerHTML = 'Scene ready! Click the blue sphere (Puffy)!';
        
        // Click interaction
        scene.onPointerObservable.add((pointerInfo) => {
            if (pointerInfo.pickInfo.hit && pointerInfo.pickInfo.pickedMesh === puffy) {
                const dialogue = document.getElementById('dialogue');
                dialogue.innerHTML = "Hi! I'm Puffy! Ready to explore science?";
                dialogue.style.display = 'block';
                setTimeout(() => dialogue.style.display = 'none', 3000);
            }
        });
        
        // Floating animation
        let time = 0;
        scene.registerBeforeRender(() => {
            time += 0.02;
            puffy.position.y = 2 + Math.sin(time) * 0.3;
        });
        
        // Render loop
        engine.runRenderLoop(() => scene.render());
        window.addEventListener('resize', () => engine.resize());
    </script>
</body>
</html>